#!/usr/bin/expect -f
#
# This Expect script was generated by autoexpect on Tue Jul  4 13:42:55 2017
# Expect and autoexpect were both written by Don Libes, NIST.
#
# Note that autoexpect does not guarantee a working script.  It
# necessarily has to guess about certain things.  Two reasons a script
# might fail are:
#
# 1) timing - A surprising number of programs (rn, ksh, zsh, telnet,
# etc.) and devices discard or ignore keystrokes that arrive "too
# quickly" after prompts.  If you find your new script hanging up at
# one spot, try adding a short sleep just before the previous send.
# Setting "force_conservative" to 1 (see below) makes Expect do this
# automatically - pausing briefly before sending each character.  This
# pacifies every program I know of.  The -c flag makes the script do
# this in the first place.  The -C flag allows you to define a
# character to toggle this mode off and on.

set force_conservative 0  ;# set to 1 to force conservative mode even if
			  ;# script wasn't run conservatively originally
if {$force_conservative} {
	set send_slow {1 .1}
	proc send {ignore arg} {
		sleep .1
		exp_send -s -- $arg
	}
}

#
# 2) differing output - Some programs produce different output each time
# they run.  The "date" command is an obvious example.  Another is
# ftp, if it produces throughput statistics at the end of a file
# transfer.  If this causes a problem, delete these patterns or replace
# them with wildcards.  An alternative is to use the -p flag (for
# "prompt") which makes Expect only look for the last line of output
# (i.e., the prompt).  The -P flag allows you to define a character to
# toggle this mode off and on.
#
# Read the man page for more info.
#
# -Don


set timeout -1
spawn $env(SHELL)
match_max 100000
expect -exact "root@raspberrypi:/home/pi/install# "
send -- "raspi-con	"
expect -exact "fig "
send -- "\r"
expect -exact "\r
\[?1049h\[1;24r\[4l\[?25l(B\[m\[37m\[40m\[1;24r\[H\[2J\[1;1H\[1m\[37m\[44m                                                                                \[2;1H                                                                                \[3;1H                                                                                \[4;1H                                                                                \[5;1H                                                                                \[6;1H                                                                                \[7;1H                                                                                \[8;1H                                                                                \[9;1H                                                                                \[10;1H                                                                                \[11;1H                                                                                \[12;1H                                                                                \[13;1H                                                                                \[14;1H                                                                                \[15;1H                                                                                \[16;1H                                                                                \[17;1H                                                                                \[18;1H                                                                                \[19;1H                                                                                \[20;1H                                                                                \[21;1H                                                                                \[22;1H                                                                                \[23;1H                                                                                \[24;1H                                                                               \[24;79H \[4h \[4l\[1;1H


(B\[m\[30m\[47mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ \[31mRaspberry Pi Software Configuration Tool (raspi-config)\[30m â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\[5;1Hâ”‚                                                                              â”‚\[6;1Hâ”‚    \[37m\[41m1 Change User Password           Change password for the default u\[30m\[47m        â”‚\[7;1Hâ”‚    2 Hostname                       Set the visible name for this Pi         â”‚\[8;1Hâ”‚    3 Boot Options                   Configure options for start-up           â”‚\[9;1Hâ”‚    4 Localisation Options           Set up language and regional sett        â”‚\[10;1Hâ”‚    5 Interfacing Options            Configure connections to peripher        â”‚\[11;1Hâ”‚    6 Overclock                      Configure overclocking for your P        â”‚\[12;1Hâ”‚    7 Advanced Options               Configure advanced settings              â”‚\[13;1Hâ”‚    8 Update                         Update this tool to the latest ve        â”‚\[14;1Hâ”‚    9 About raspi-config             Information about this configurat        â”‚\[15;1Hâ”‚                                                                              â”‚\[16;1Hâ”‚                                                                              â”‚\[17;1Hâ”‚                                                                              â”‚\[18;1Hâ”‚                     <Select>                     <Finish>                    â”‚\[19;1Hâ”‚                                                                              â”‚\[20;1Hâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\[21;2H\[1m\[37m\[40m                                                                               \[6;6H"
send -- "\[B"
expect -exact "(B\[m\[30m\[47m1 Change User Password           Change password for the default u\[7;6H\[37m\[41m2 Hostname                       Set the visible name for this Pi \[7;6H"
send -- "\[B"
expect -exact "\[30m\[47m2 Hostname                       Set the visible name for this Pi \[8;6H\[37m\[41m3 Boot Options                   Configure options for start-up   \[8;6H"
send -- "\[B"
expect -exact "\[30m\[47m3 Boot Options                   Configure options for start-up   \[9;6H\[37m\[41m4 Localisation Options           Set up language and regional sett\[9;6H"
send -- "\r"
expect -exact "\[?12l\[?25h\[24;1H\[40m(B\[m\[39;49m\r\[K\r\[?1049l\[?1049h\[1;24r\[4l\[?25l(B\[m\[37m\[40m\[1;24r\[H\[2J\[1;1H\[1m\[37m\[44m                                                                                \[2;1H                                                                                \[3;1H                                                                                \[4;1H                                                                                \[5;1H                                                                                \[6;1H                                                                                \[7;1H                                                                                \[8;1H                                                                                \[9;1H                                                                                \[10;1H                                                                                \[11;1H                                                                                \[12;1H                                                                                \[13;1H                                                                                \[14;1H                                                                                \[15;1H                                                                                \[16;1H                                                                                \[17;1H                                                                                \[18;1H                                                                                \[19;1H                                                                                \[20;1H                                                                                \[21;1H                                                                                \[22;1H                                                                                \[23;1H                                                                                \[24;1H                                                                               \[24;79H \[4h \[4l\[1;1H


(B\[m\[30m\[47mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ \[31mRaspberry Pi Software Configuration Tool (raspi-config)\[30m â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\[5;1Hâ”‚                                                                              â”‚\[6;1Hâ”‚    \[37m\[41mI1 Change Locale                 Set up language and regional sett\[30m\[47m        â”‚\[7;1Hâ”‚    I2 Change Timezone               Set up timezone to match your loc        â”‚\[8;1Hâ”‚    I3 Change Keyboard Layout        Set the keyboard layout to match         â”‚\[9;1Hâ”‚    I4 Change Wi-fi Country          Set the legal channels used in yo        â”‚\[10;1Hâ”‚                                                                              â”‚\[11;1Hâ”‚                                                                              â”‚\[12;1Hâ”‚                                                                              â”‚\[13;1Hâ”‚                                                                              â”‚\[14;1Hâ”‚                                                                              â”‚\[15;1Hâ”‚                                                                              â”‚\[16;1Hâ”‚                                                                              â”‚\[17;1Hâ”‚                                                                              â”‚\[18;1Hâ”‚                     <Select>                     <Back>                      â”‚\[19;1Hâ”‚                                                                              â”‚\[20;1Hâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\[21;2H\[1m\[37m\[40m                                                                               \[6;6H"
send -- "\[B"
expect -exact "(B\[m\[30m\[47mI1 Change Locale                 Set up language and regional sett\[7;6H\[37m\[41mI2 Change Timezone               Set up timezone to match your loc\[7;6H"
send -- "\r"
expect -exact "\[?12l\[?25h\[24;1H\[40m(B\[m\[39;49m\r\[K\r\[?1049l\[?1049h\[1;24r\[4l\[?25l(B\[m\[37m\[40m\[1;24r\[H\[2J\[1;1H\[1m\[37m\[44m                                                                                \[2;1H                                                                                \[3;1H                                                                                \[4;1H                                                                                \[5;1H                                                                                \[6;1H                                                                                \[7;1H                                                                                \[8;1H                                                                                \[9;1H                                                                                \[10;1H                                                                                \[11;1H                                                                                \[12;1H                                                                                \[13;1H                                                                                \[14;1H                                                                                \[15;1H                                                                                \[16;1H                                                                                \[17;1H                                                                                \[18;1H                                                                                \[19;1H                                                                                \[20;1H                                                                                \[21;1H                                                                                \[22;1H                                                                                \[23;1H                                                                                \[24;1H                                                                               \[24;79H \[4h \[4l\[1;1H(B\[m\[37m\[44mPackage configuration\[3;3H\[30m\[47mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ \[31mConfiguring tzdata\[30m â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\[4;3Hâ”‚ Please select the geographic area in which you live. Subsequent         â”‚\[1m\[37m\[40m \[5;3H(B\[m\[30m\[47mâ”‚ configuration questions will narrow this down by presenting a list of   â”‚\[1m\[37m\[40m \[6;3H(B\[m\[30m\[47mâ”‚ cities, representing the time zones in which they are located.          â”‚\[1m\[37m\[40m \[7;3H(B\[m\[30m\[47mâ”‚                                                                         â”‚\[1m\[37m\[40m \[8;3H(B\[m\[30m\[47mâ”‚ Geographic area:                                                        â”‚\[1m\[37m\[40m \[9;3H(B\[m\[30m\[47mâ”‚                                                                         â”‚\[1m\[37m\[40m \[10;3H(B\[m\[30m\[47mâ”‚                          Africa                â†‘                        â”‚\[1m\[37m\[40m \[11;3H(B\[m\[30m\[47mâ”‚                          \[37m\[41mAmerica             \[30m\[47m  â–®                        â”‚\[1m\[37m\[40m \[12;3H(B\[m\[30m\[47mâ”‚                          Antarctica            â–’                        â”‚\[1m\[37m\[40m \[13;3H(B\[m\[30m\[47mâ”‚                          Australia             â–’                        â”‚\[1m\[37m\[40m \[14;3H(B\[m\[30m\[47mâ”‚                          Arctic Ocean          â–’                        â”‚\[1m\[37m\[40m \[15;3H(B\[m\[30m\[47mâ”‚                          Asia                  â–’                        â”‚\[1m\[37m\[40m \[16;3H(B\[m\[30m\[47mâ”‚                          Atlantic Ocean        â–’                        â”‚\[1m\[37m\[40m \[17;3H(B\[m\[30m\[47mâ”‚                          Europe                â†“                        â”‚\[1m\[37m\[40m \[18;3H(B\[m\[30m\[47mâ”‚                                                                         â”‚\[1m\[37m\[40m \[19;3H(B\[m\[30m\[47mâ”‚                                                                         â”‚\[1m\[37m\[40m \[20;3H(B\[m\[30m\[47mâ”‚                   <Ok>                       <Cancel>                   â”‚\[1m\[37m\[40m \[21;3H(B\[m\[30m\[47mâ”‚                                                                         â”‚\[1m\[37m\[40m \[22;3H(B\[m\[30m\[47mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\[1m\[37m\[40m \[23;4H                                                                           \[11;30H"
send -- "\r"
expect -exact "\[?12l\[?25h\[24;1H(B\[m\[37m\[40m(B\[m\[39;49m\r\[K\r\[?1049l\[?1049h\[1;24r\[4l\[?25l(B\[m\[37m\[40m\[1;24r\[H\[2J\[1;1H\[1m\[37m\[44m                                                                                \[2;1H                                                                                \[3;1H                                                                                \[4;1H                                                                                \[5;1H                                                                                \[6;1H                                                                                \[7;1H                                                                                \[8;1H                                                                                \[9;1H                                                                                \[10;1H                                                                                \[11;1H                                                                                \[12;1H                                                                                \[13;1H                                                                                \[14;1H                                                                                \[15;1H                                                                                \[16;1H                                                                                \[17;1H                                                                                \[18;1H                                                                                \[19;1H                                                                                \[20;1H                                                                                \[21;1H                                                                                \[22;1H                                                                                \[23;1H                                                                                \[24;1H                                                                               \[24;79H \[4h \[4l\[1;1H(B\[m\[37m\[44mPackage configuration\[3;6H\[30m\[47mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ \[31mConfiguring tzdata\[30m â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\[4;6Hâ”‚ Please select the city or region corresponding to your time zone.  â”‚\[1m\[37m\[40m \[5;6H(B\[m\[30m\[47mâ”‚                                                                    â”‚\[1m\[37m\[40m \[6;6H(B\[m\[30m\[47mâ”‚ Time zone:                                                         â”‚\[1m\[37m\[40m \[7;6H(B\[m\[30m\[47mâ”‚                                                                    â”‚\[1m\[37m\[40m \[8;6H(B\[m\[30m\[47mâ”‚                     Metlakatla                  â†‘                  â”‚\[1m\[37m\[40m \[9;6H(B\[m\[30m\[47mâ”‚                     Mexico City                 â–’                  â”‚\[1m\[37m\[40m \[10;6H(B\[m\[30m\[47mâ”‚                     Miquelon                    â–’                  â”‚\[1m\[37m\[40m \[11;6H(B\[m\[30m\[47mâ”‚                     Moncton                     â–’                  â”‚\[1m\[37m\[40m \[12;6H(B\[m\[30m\[47mâ”‚                     Monterrey                   â–’                  â”‚\[1m\[37m\[40m \[13;6H(B\[m\[30m\[47mâ”‚                     Montevideo                  â–®                  â”‚\[1m\[37m\[40m \[14;6H(B\[m\[30m\[47mâ”‚                     Montreal                    â–’                  â”‚\[1m\[37m\[40m \[15;6H(B\[m\[30m\[47mâ”‚                     Montserrat                  â–’                  â”‚\[1m\[37m\[40m \[16;6H(B\[m\[30m\[47mâ”‚                     Nassau                      â–’                  â”‚\[1m\[37m\[40m \[17;6H(B\[m\[30m\[47mâ”‚                     \[37m\[41mNew York                  \[30m\[47m  â†“                  â”‚\[1m\[37m\[40m \[18;6H(B\[m\[30m\[47mâ”‚                                                                    â”‚\[1m\[37m\[40m \[19;6H(B\[m\[30m\[47mâ”‚                                                                    â”‚\[1m\[37m\[40m \[20;6H(B\[m\[30m\[47mâ”‚                 <Ok>                     <Cancel>                  â”‚\[1m\[37m\[40m \[21;6H(B\[m\[30m\[47mâ”‚                                                                    â”‚\[1m\[37m\[40m \[22;6H(B\[m\[30m\[47mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\[1m\[37m\[40m \[23;7H                                                                      \[17;28H"
send -- "\r"
expect -exact "\[?12l\[?25h\[24;1H(B\[m\[37m\[40m(B\[m\[39;49m\r\[K\r\[?1049l\r
Current default time zone: 'America/New_York'\r
Local time is now:      Tue Jul  4 13:43:12 EDT 2017.\r
Universal Time is now:  Tue Jul  4 17:43:12 UTC 2017.\r
\r
\[?1049h\[1;24r\[4l\[?25l(B\[m\[37m\[40m\[1;24r\[H\[2J\[1;1H\[1m\[37m\[44m                                                                                \[2;1H                                                                                \[3;1H                                                                                \[4;1H                                                                                \[5;1H                                                                                \[6;1H                                                                                \[7;1H                                                                                \[8;1H                                                                                \[9;1H                                                                                \[10;1H                                                                                \[11;1H                                                                                \[12;1H                                                                                \[13;1H                                                                                \[14;1H                                                                                \[15;1H                                                                                \[16;1H                                                                                \[17;1H                                                                                \[18;1H                                                                                \[19;1H                                                                                \[20;1H                                                                                \[21;1H                                                                                \[22;1H                                                                                \[23;1H                                                                                \[24;1H                                                                               \[24;79H \[4h \[4l\[1;1H


(B\[m\[30m\[47mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ \[31mRaspberry Pi Software Configuration Tool (raspi-config)\[30m â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\[5;1Hâ”‚                                                                              â”‚\[6;1Hâ”‚    \[37m\[41m1 Change User Password           Change password for the default u\[30m\[47m        â”‚\[7;1Hâ”‚    2 Hostname                       Set the visible name for this Pi         â”‚\[8;1Hâ”‚    3 Boot Options                   Configure options for start-up           â”‚\[9;1Hâ”‚    4 Localisation Options           Set up language and regional sett        â”‚\[10;1Hâ”‚    5 Interfacing Options            Configure connections to peripher        â”‚\[11;1Hâ”‚    6 Overclock                      Configure overclocking for your P        â”‚\[12;1Hâ”‚    7 Advanced Options               Configure advanced settings              â”‚\[13;1Hâ”‚    8 Update                         Update this tool to the latest ve        â”‚\[14;1Hâ”‚    9 About raspi-config             Information about this configurat        â”‚\[15;1Hâ”‚                                                                              â”‚\[16;1Hâ”‚                                                                              â”‚\[17;1Hâ”‚                                                                              â”‚\[18;1Hâ”‚                     <Select>                     <Finish>                    â”‚\[19;1Hâ”‚                                                                              â”‚\[20;1Hâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\[21;2H\[1m\[37m\[40m                                                                               \[6;6H"
send -- "\[C"
expect -exact "(B\[m\[37m\[44m1 Change User Password           Change password for the default u\[18;23H\[41m<Select>\[18;24H"
send -- "\[C"
expect -exact "\[30m\[47m<Select>\[21C\[37m\[41m<Finish>\[18;53H"
send -- "\r"
expect -exact "\[?12l\[?25h\[24;1H\[40m(B\[m\[39;49m\r\[K\r\[?1049lroot@raspberrypi:/home/pi/install# "
send -- "exut"
expect -exact "\[K"
send -- ""
expect -exact "\[K"
send -- "it\r"
expect eof
